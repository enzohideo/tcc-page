<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <title>Azalea Desktop Shell - TCC</title>
  <link rel="stylesheet" href="./simple.min.css">
  <style>
    td {
      text-align: center;
    }
  </style>
</head>

<body>
<section>
<h1>
  Azalea
</h1>
<h4>
  A compositor agnostic desktop shell for Wayland
</h4>
<ul>
  <li><b>Author</b>: Enzo Hideo Kobayashi</li>
  <li><b>Advisors</b>: Alfredo Goldman and Nelson Posse Lago (awaiting confirmation)</li>
</ul>
<h2>
  Introduction
</h2>

<p>
Desktop shells, also called graphical shells, are a set of widgets and
graphical interfaces that allow an user to interact with an Operating System,
similar to a command-line shell but graphically, hence the name. A few examples
of graphical shell components include: taskbars, app launchers, wallpaper
selectors, systray, notification menu, etc.
</p>

<p>
The most popular graphical shells on Linux are oftentimes tied to a desktop
environment, like KDE's plasmashell and GNOME Shell. However, there's also a
niche community of users that prefer using window managers (X11) or wayland
compositors directly without a full-fledged graphical shell, like i3,
AwesomeWM, Sway, Hyprland, etc. Among those users, some enjoy to create their
own widgets instead, which is part of a hobby informally referred to as 
<a href="https://wiki.installgentoo.com/index.php/GNU/Linux_ricing">"ricing"</a>.
</p>

<p>
In the latter context of users developing their own widgets, it's common the
usage of libraries to create <b>specific</b> graphical shell components, like <a
href="https://github.com/Alexays/Waybar">waybar</a> and 
<a href="https://github.com/polybar/polybar">polybar</a> 
to create a basic status bar, and libraries that offer a bit more freedom, like
<a href="https://github.com/elkowar/eww">eww</a> and 
<a href="https://github.com/Aylur/astal">astal</a> to create <b>generic and complex</b> widgets.
</p>

<p>
Nowadays, many of these graphical shells libraries are made for Wayland instead
          of X11 because of the recent 
          <a href="https://wayland.app/protocols/wlr-layer-shell-unstable-v1">layer
            shell
          </a> protocol, which allows the creation of graphical shell
          components that work on any Wayland compositor that implements it.
          And despite being a 
          <a href="https://gitlab.freedesktop.org/wlroots/wlr-protocols">wlroots
            extension</a>, it's already 
          <a href="https://wayland.app/protocols/wlr-layer-shell-unstable-v1#compositor-support">
            supported on many compositors.
          </a>
</p>

<h2>
  Objectives
</h2>

<p>
The main objective is to develop a compositor agnostic desktop shell for
          wayland while exploring the limits of the layer shell protocol. It's
          expected to find a few widgets that are difficult to develop without
          breaking the compositor agnostic rule, so a part of the project is
          also to find ways to work around it.
</p>

<p>
The name of the desktop shell is Azalea and I intend to use <a
            href="https://www.rust-lang.org/">Rust</a> as main programming
          language. The core library developed will be based on gtk4 and will
          be open source to allow other developers to create their own desktop
          shells as well. And since the main target audience of Azalea are
          developers, not general users, all the settings and configurations
          will be done through dotfiles, which are better for versioning and
          easier to share.
</p>

<p>
As a personal goal, I'll also use this project to learn and explore <a
            href="https://nixos.org/">Nix</a> as a tool for development,
          building, and packaging. As well as creating a reproducible NixOS
          virtual machine to run the project under multiple wayland
          compositors, since it's supposed to be compositor agnostic.
</p>

<p>
As extra objectives I also hope to develop a basic greeter using 
<a href="https://git.sr.ht/~kennylevinsen/greetd">greetd</a> and a
lock screen using the wayland <a
href="https://wayland.app/protocols/ext-session-lock-v1">session lock</a>
protocol.
</p>

<h2>
  Schedule
</h2>

<table>
  <tr>
    <th>Task</th>
    <th>May</th>
    <th>June</th>
    <th>July</th>
    <th>August</th>
    <th>September</th>
    <th>October</th>
  </tr>
  <tr>
    <th>Core library</th>
    <td>x</td>
    <td>x</td>
    <td>x</td>
    <td>x</td>
    <td>x</td>
    <td>x</td>
  </tr>
  <tr>
    <th>Clock, Date, Calendar<br>(taskbar)</th>
    <td>x</td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <th>MPRIS<br>(DBus, taskbar)</th>
    <td>x</td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <th>Network<br>(taskbar + menu)</th>
    <td>x</td>
    <td>x</td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <th>Bluetooth<br>(taskbar + menu)</th>
    <td>x</td>
    <td>x</td>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <th>NixOS VM</th>
    <td>x</td>
    <td>x</td>
    <td>x</td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <th>System tray<br>(DBus, taskbar)</th>
    <td></td>
    <td>x</td>
    <td>x</td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <th>Wallpaper selector</th>
    <td></td>
    <td>x</td>
    <td>x</td>
    <td></td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <th>Dynamic theme based on wallpaper</th>
    <td></td>
    <td>x</td>
    <td>x</td>
    <td>x</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <th>Dotfile parser</th>
    <td></td>
    <td></td>
    <td></td>
    <td>x</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <th>App launcher</th>
    <td></td>
    <td></td>
    <td></td>
    <td>x</td>
    <td></td>
    <td></td>
  </tr>
  <tr>
    <th>Notifications<br>(DBus, taskbar + menu)</th>
    <td></td>
    <td></td>
    <td></td>
    <td>x</td>
    <td>x</td>
    <td></td>
  </tr>
  <tr>
    <th>Workspace selector</th>
    <td></td>
    <td></td>
    <td></td>
    <td>x</td>
    <td>x</td>
    <td></td>
  </tr>
  <tr>
    <th>Audio visualizer</th>
    <td></td>
    <td></td>
    <td></td>
    <td>x</td>
    <td>x</td>
    <td></td>
  </tr>
  <tr>
    <th>Greeter (extra)</th>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td>x</td>
    <td>x</td>
  </tr>
  <tr>
    <th>Session lock (extra)</th>
    <td></td>
    <td></td>
    <td></td>
    <td></td>
    <td>x</td>
    <td>x</td>
  </tr>
  <tr>
    <th>Monograph</th>
    <td></td>
    <td></td>
    <td>x</td>
    <td>x</td>
    <td>x</td>
    <td>x</td>
  </tr>
</table> 

<h2>
  References
</h2>

<ul>
  <li>Drew DeVault's blog post about layer shell; <a
      href="https://drewdevault.com/2018/07/29/Wayland-shells.html">https://drewdevault.com/2018/07/29/Wayland-shells.html</a></li>
</ul>
</section>
</body>

</html>
